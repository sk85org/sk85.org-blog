<!doctype html><html lang=ja xmlns=http://www.w3.org/1999/xhtml><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=icon href=data:,%89PNG%0D%0A%1A%0A><link rel=alternate type=application/rss+xml href=/n%E5%B9%B4%E6%97%A5%E8%A8%98/1030/index.xml title=d.sk85.org><title>1030</title>
<link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP&display=swap" rel=stylesheet><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/font.css></head><body><header><a href=/ title=top><span class=menu>top</span></a>&nbsp;<a href=/archives/ title=archives><span class=menu>archives</span></a>&nbsp;<a href=/tags/ title=tags><span class=menu>tags</span></a>&nbsp;<a href=/about/ title=about><span class=menu>about</span></a>&nbsp;</header><h1>10月30日 (n年日記)</h1><form method=get action=https://dsearch.sk85.org/cgi/><input type=text name=phrase size=20>
<input type=submit value=Search>
<input type=hidden name=enc value=UTF-8></form><dl><dt><a href=/posts/2023/10/30/432810/><time datetime=2023-10-30>2023-10-30&ensp;(月)</time></a></dt><dd><h2 id=午前>午前</h2><ul><li>子供通園</li><li>実験の分析とか後片付け</li><li>ミーティング</li><li>昼食時間中に帰宅</li></ul><h2 id=午後>午後</h2><ul><li>マクドナルドで昼食</li><li>在宅勤務</li><li>午後から役員面接</li><li>事務仕事をして子供お迎え</li></ul><h2 id=体調>体調</h2><ul><li>74</li></ul><h2 id=その他>その他</h2><h2 id=今日の-tabs>今日の Tabs</h2></dd><dt><a href=/posts/2022/10/30/114341/><time datetime=2022-10-30>2022-10-30&ensp;(日)</time></a></dt><dd><h2 id=午前>午前</h2><ul><li>自宅で過ごす</li></ul><h2 id=午後>午後</h2><ul><li>自宅で過ごす</li><li>夕方子供とホームセンターへ</li><li>亀を見る</li><li>頭痛治ったな</li></ul><h2 id=体調>体調</h2><ul><li>76</li></ul><h2 id=その他>その他</h2><h2 id=今日のtabs>今日のTabs</h2></dd><dt><a href=/posts/2021/10/30/353859/><time datetime=2021-10-30>2021-10-30&ensp;(土)</time></a></dt><dd><h3 id=vpsをやめる>VPSをやめる</h3><p>indigoのVPSサーバー上に<a href=https://tailscale.com/>Tailscale</a>をインストールして、自宅のサーバーにVPNで接続して、nginxのproxyとBASIC認証を使っていたのだけれど<a href=/posts/2021/09/28/429812/>*</a>、自宅からVPSサーバーを迂回して大きなファイルを転送するとループを検知してか、30分ぐらいIPアドレスがブロックされてしまう。運用も面倒だなと思っていたら、<a href=https://www.cloudflare.com/products/tunnel/>Cloudflare Tunnel</a>を使うと、無料で認証まで簡単にやってくれるらしい。実際やってみると簡単。VPS借りて手動でプロキシ立てるのがばからしくなる。</p><h3 id=メモ>メモ</h3><h4 id=前提>前提</h4><p>必要なのは</p><ol><li>自分でネームサーバーを設定できる独自ドメイン</li></ol><h4 id=cloudflareにドメインを登録してネームサーバーをcloudflareに設定する>Cloudflareにドメインを登録してネームサーバーをCloudflareに設定する</h4><p>Cloudflareが現状のDNS設定を読み込んでくれ、ネームサーバーの変更をガイドしてくれる</p><h4 id=cloudflare-for-teamsに登録>Cloudflare for Teamsに登録</h4><h4 id=アプリケーションの追加>アプリケーションの追加</h4><p>Cloudflare for Teamsのダッシュボードからアプリケーションを追加する。Application URLはアクセスしたいURLを指定する。認証方法はメールアドレスや、IPアドレス、国等いろいろと選べる。
<span class=img style=text-align:center><a href="https://img.sk85.org/imaginary/resize?width=2000&quality=100&file=20211030-05-14-11-NPFd9meNr7exX4TYqzw3.png"><img src="https://img.sk85.org/imaginary/resize?width=600&quality=80&file=20211030-05-14-11-NPFd9meNr7exX4TYqzw3.png" loading=“lazy”></a><figcaption></figcaption></span><span class=img style=text-align:center><a href="https://img.sk85.org/imaginary/resize?width=2000&quality=100&file=20211030-05-14-11-KOagNzNb8tL1hIFTPoz9.png"><img src="https://img.sk85.org/imaginary/resize?width=600&quality=80&file=20211030-05-14-11-KOagNzNb8tL1hIFTPoz9.png" loading=“lazy”></a><figcaption></figcaption></span></p><h4 id=cloudflaredのインストール>cloudflaredのインストール</h4><p><a href=https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup>Get started · Cloudflare for Teams documentation</a></p><h4 id=ログインとtunnelsの作成tunnelの作成はnon-rootで可能>ログインとTunnelsの作成(tunnelの作成はnon rootで可能)</h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>$ cloudflared tunnel login #(表示されるURLにアクセスする)
</span></span><span style=display:flex><span>$ loudflared tunnel create NAME #(NAMEは任意のチャンネル名)
</span></span><span style=display:flex><span>Tunnel credentials written to /path/to/.cloudflared/&lt;Tunnel-UUID&gt;.json. 
</span></span><span style=display:flex><span>cloudflared chose this file based on where your origin certificate was found.
</span></span><span style=display:flex><span>Keep this file secret. To revoke these credentials, delete the tunnel.
</span></span></code></pre></div><p>ダッシュボードから作成したTunnelsのTunnel-UUIDが確認できる。削除はCLIもしくはダッシュボードから可能。
<span class=img style=text-align:center><a href="https://img.sk85.org/imaginary/resize?width=2000&quality=100&file=20211030-04-56-26-5A-HtfL5EQlZreSa3l4Y.png"><img src="https://img.sk85.org/imaginary/resize?width=900&quality=80&file=20211030-04-56-26-5A-HtfL5EQlZreSa3l4Y.png" loading=“lazy”></a><figcaption></figcaption></span>ホームフォルダ上の.cloudflaredディレクトリの中に設定ファイルconfig.ymlを作成する。
サーバー上のサービスとバーチャルホストを対応させる。サービスごとにTunnelを作成することもできるが、簡単にするために<a href=https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/configuration/configuration-file/ingress>Ingress rules</a>にする。</p></dd><dt><a href=/posts/2021/10/30/300029/><time datetime=2021-10-30>2021-10-30&ensp;(土)</time></a></dt><dd><h2 id=午前>午前</h2><ul><li>8:30起床</li><li>10:00ごろ近くのモールに買い物に</li></ul><h2 id=午後>午後</h2><ul><li>だらだらとcloudflareの設定をいじる</li><li>ユニクロに冬物を買いに</li><li>公園で遊ぶ</li><li>夕食は一年ぶりぐらいに鳥貴族</li><li>23:30就寝</li></ul><h2 id=体調>体調</h2><ul><li>普通</li></ul><h2 id=その他>その他</h2><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/Y3io6E4Eaj4?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><h4 id=lm_sensorsでファンの回転数が取れない>lm_sensorsでファンの回転数が取れない</h4><p>先日導入したサーバーにlm_sensorsをインストールしてもファン回転数や電圧が取れない。<br>これで解決した: <a href=https://askubuntu.com/questions/1253722/how-to-display-fan-speeds>how to display fan speeds - Ask Ubuntu</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-txt data-lang=txt><span style=display:flex><span>/etc/default/grubを編集して
</span></span><span style=display:flex><span>GRUB_CMDLINE_LINUX_DEFAULT=&#34;acpi_enforce_resources=lax&#34; にする
</span></span><span style=display:flex><span>$ sudo update-grub
</span></span><span style=display:flex><span>$ reboot
</span></span></code></pre></div><h2 id=今日のtabs>今日のTabs</h2><ul><li><a href="https://doitsudayori.blogspot.com/2021/10/blog-post_30.html?m=1">（最後の挨拶）ドイツという国</a></li><li><a href=https://interface.cqpub.co.jp/magazine/202110/>3Dプリンタ＆メカ設計入門 ｜ Interface – CQ出版</a> 3d</li></ul></dd></dl><footer></footer></body></html>