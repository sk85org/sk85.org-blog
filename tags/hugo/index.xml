<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Hugo on d.sk85.org</title><link>/tags/hugo/</link><description>Recent content in Hugo on d.sk85.org</description><generator>Hugo</generator><language>ja</language><lastBuildDate>Tue, 29 Nov 2022 22:37:02 +0900</lastBuildDate><atom:link href="/tags/hugo/index.xml" rel="self" type="application/rss+xml"/><item><title>2022-11-27</title><link>/posts/2022/11/27/830636/</link><pubDate>Sun, 27 Nov 2022 00:00:00 +0900</pubDate><guid>/posts/2022/11/27/830636/</guid><description>&lt;h2 id="午前">午前&lt;/h2>
&lt;ul>
&lt;li>息子の朝食作り&lt;/li>
&lt;li>息子は水泳&lt;/li>
&lt;li>近くのハンバーガー屋で作業&lt;/li>
&lt;li>息子の喘息の薬を処方してもらうために病院に&lt;/li>
&lt;li>スーパーに寄って帰宅&lt;/li>
&lt;/ul>
&lt;h2 id="午後">午後&lt;/h2>
&lt;ul>
&lt;li>息子はお母さんと公園に&lt;/li>
&lt;li>僕はDVDを借りてきて、自宅でダラダラと過ごす&lt;/li>
&lt;/ul>
&lt;h2 id="体調">体調&lt;/h2>
&lt;ul>
&lt;li>明日からの実験がうまくいくか不安&lt;/li>
&lt;li>やや気持ちが落ち気味&lt;/li>
&lt;li>早めに就寝&lt;/li>
&lt;/ul>
&lt;h2 id="その他">その他&lt;/h2>
&lt;h2 id="今日のtabs">今日のTabs&lt;/h2></description></item><item><title>Hugoのテーマを新しくした</title><link>/posts/2022/11/27/943256/</link><pubDate>Sun, 27 Nov 2022 00:00:00 +0900</pubDate><guid>/posts/2022/11/27/943256/</guid><description>&lt;ul>
&lt;li>hugoのテーマを新しくした&lt;/li>
&lt;li>&lt;a href="https://themes.gohugo.io/themes/accessible-minimalism-hugo-theme/">Accessible Minimalism | Hugo Themes&lt;/a>をベースに&lt;a href="https://tbsmcd.net/">Index | tbsmcd.net&lt;/a>を参考に
&lt;ul>
&lt;li>シンプルにしたので随分見やすくなった&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>Hyper Nikki Systemにあるようなn年日記を追加
&lt;ul>
&lt;li>&lt;a href="http://localhost:1313/n%E5%B9%B4%E6%97%A5%E8%A8%98/1127/">d.sk85.org | 1127&lt;/a>&lt;/li>
&lt;li>こんな感じで過去の同じ月と日の日記が見える&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>細かい修正とダークモードを追加しないと&lt;/li>
&lt;/ul></description></item><item><title>2021-08-21</title><link>/posts/2021/08/21/126670/</link><pubDate>Sat, 21 Aug 2021 17:14:16 +0900</pubDate><guid>/posts/2021/08/21/126670/</guid><description>&lt;h2 id="午前">午前&lt;/h2>
&lt;ul>
&lt;li>息子朝から熱が高め&lt;/li>
&lt;li>小児科に連れて行く、混んでいた
&lt;ul>
&lt;li>RSVと&lt;a href="https://ja.wikipedia.org/wiki/%E3%83%92%E3%83%88%E3%83%A1%E3%82%BF%E3%83%8B%E3%83%A5%E3%83%BC%E3%83%A2%E3%82%A6%E3%82%A4%E3%83%AB%E3%82%B9">hMPV&lt;/a>はマイナス&lt;/li>
&lt;li>ネブライザーで気管支拡張薬吸引&lt;/li>
&lt;li>&lt;a href="https://ja.wikipedia.org/wiki/%E3%83%84%E3%83%AD%E3%83%96%E3%83%86%E3%83%AD%E3%83%BC%E3%83%AB">ツロブテロール貼付剤&lt;/a>と風邪薬と座薬を処方された&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>しんどいのか食欲なし&lt;/li>
&lt;/ul>
&lt;h2 id="午後">午後&lt;/h2>
&lt;ul>
&lt;li>長時間お昼寝&lt;/li>
&lt;li>図書館で本を借りてくる
&lt;ul>
&lt;li>&lt;a href="https://calil.jp/book/4334044956">正義を振りかざす「極端な人」の正体 (光文社新書) | カーリル&lt;/a>&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>夕食も食欲なし&lt;/li>
&lt;li>座薬を入れて就寝&lt;/li>
&lt;/ul>
&lt;h2 id="体調">体調&lt;/h2>
&lt;ul>
&lt;li>普通&lt;/li>
&lt;/ul>
&lt;h2 id="その他">その他&lt;/h2>
&lt;h4 id="github-actions">GitHub Actions&lt;/h4>
&lt;p>&lt;a href="https://github.com/sk85org/sk85.org-blog/tree/main/.github/workflows">sk85.org-blog/.github/workflows/&lt;/a>&lt;br>
GithubActionsを利用して日記ファイル(md形式)をテンプレートエンジンで定期作成して、サーバーにデプロイするようにした。Keyboard Maestroのスクリプトでも簡単に作れるけど、GitHubのコードエディタでも作れるとipadでの編集が楽かなと思って。GitHub ActionsはUTCで動いているので、起動する時間に注意が必要。ジョブを実行するマシンではタイムゾーンを設定するとJSTで書ける。&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://docs.github.com/ja/actions/reference/events-that-trigger-workflows#scheduled-events">ワークフローをトリガーするイベント&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://crontab.guru/">Crontab.guru - The cron schedule expression editor&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.kaizenprogrammer.com/entry/2020/06/19/085529">『GitHub Actions 実践入門』の商業版が販売開始しました - 生産性向上ブログ&lt;/a>を購入&lt;/li>
&lt;/ul></description></item><item><title>hugoのURL構成を変更した</title><link>/posts/2020/12/13/388521/</link><pubDate>Sun, 13 Dec 2020 23:05:43 +0900</pubDate><guid>/posts/2020/12/13/388521/</guid><description>&lt;p>フォルダでの管理をやめ、contents/post以下に YYYYMMDD_XXXXXX.md 命名ルール (X:数字)のファイルを置くようにした。&lt;br>
ファイルのフロントマターにslug: XXXXXXを指定するようにした。&lt;br>
URLの構成を変えて、/posts/YYYY/MM/DD/XXXXXX/でアクセスできるようにしたので、&lt;br>
一日に複数の記事をかけるようになった。分類はtagのみ。&lt;/p></description></item><item><title>hugoのデプロイ方法を変更した</title><link>/posts/2020/12/13/758287/</link><pubDate>Sun, 13 Dec 2020 14:38:13 +0900</pubDate><guid>/posts/2020/12/13/758287/</guid><description>&lt;p>conoha VPSへの移行に伴って、hugoのデプロイ方法を変更した。&lt;br>
今までは、GitHubにpushするとGitHubからVPSにWebhookが飛び、&lt;br>
それを起点にVPSからリポジトリをpullして、VPS上でデプロイしていた。&lt;/p>
&lt;p>それを変更し、Gtihub actionを利用してpushを起点にしてVPSに&lt;br>
変更ファイルをrsyncして、VPS側で静的ファイルを出力するように変更した。&lt;br>
VPSへの同期の方法しか変わっていないが、VPS側でwebhookサーバーを立てる必要がなくなった。&lt;/p></description></item><item><title>Hugoで作った静的サイトのデータをgithubで管理する</title><link>/posts/2019/06/29/395779/</link><pubDate>Sat, 29 Jun 2019 13:23:38 +0900</pubDate><guid>/posts/2019/06/29/395779/</guid><description>&lt;p>hugoでサイトを作るにあたって、Markdownファイルやテンプレートはgithub上で管理している。&lt;br>
github上のリポジトリにcommitがあるとgithubからwebhookが飛ぶ。&lt;br>
それを受け取ったサーバー上でgit pullして同期、その後hugoでデプロイ&lt;/p>
&lt;h3 id="webhookサーバーを書いた">Webhookサーバーを書いた&lt;/h3>
&lt;p>&lt;a href="https://github.com/skt1984/webhook">skt1984/webhook&lt;/a>&lt;br>
hook.jsonにアドレス, シークレットキー, X-GitHub-Event及び実行したいシェルスクリプトを指定する。&lt;/p>
&lt;pre tabindex="0">&lt;code>[
 {
 &amp;#34;path&amp;#34;: &amp;#34;/hugo&amp;#34;,
 &amp;#34;name&amp;#34;: &amp;#34;put&amp;#34;,
 &amp;#34;shell&amp;#34;: &amp;#34;sh&amp;#34;,
 &amp;#34;execute-command&amp;#34;: &amp;#34;hugo.sh&amp;#34;,
 &amp;#34;execute-command-directry&amp;#34;: &amp;#34;/home/username/webhook&amp;#34;,
 &amp;#34;X-GitHub-Event&amp;#34;: &amp;#34;push&amp;#34;,
 &amp;#34;method&amp;#34;: &amp;#34;POST&amp;#34;,
 &amp;#34;secret&amp;#34;: &amp;#34;secret_key&amp;#34;
 }
]
&lt;/code>&lt;/pre>&lt;p>起動時にjsonファイルとポートの指定が可能&lt;/p>
&lt;pre tabindex="0">&lt;code>./webhook -f hook.json -p :8080
&lt;/code>&lt;/pre>&lt;p>github上のリポジトリでhostname:8080/hugoを対象にwebhookの設定を行い、commitが行われるとhugo.shが実行される。/home/username/repositoryではリモートリポジトリをgithubに指定&lt;/p>
&lt;p>まずローカルにGitHubのリポジトリをcloneする&lt;/p>
&lt;pre tabindex="0">&lt;code>cd /home/username
git clone git@github.com:username/repository.git
&lt;/code>&lt;/pre>&lt;p>hugoのbinaryを入手&lt;/p>
&lt;pre tabindex="0">&lt;code>cd /home/username/repository
git pull
cd /home/username/repository 
/path/to/hugobinary/hugo -d /phome/username/public```
&lt;/code>&lt;/pre>&lt;ul>
&lt;li>systemdの登録について (userを指定しないとgitpull　できない・)&lt;/li>
&lt;/ul>
&lt;pre tabindex="0">&lt;code>[Unit]
Description = webhook

[Service]
ExecStart = /path/to/webhook/webhook -f /path/to/webhook/hook.json -p :8080
Restart = always
Type = simple
User=user

[Install]
WantedBy = multi-user.target
&lt;/code>&lt;/pre></description></item></channel></rss>